(function(){return function(){if(!this._is_form){return;}var _a=null;this.on_create=function(){this.set_name("frameBottom");this.set_titletext("frameBottom");this.set_scrolltype("none");if(Form==this.constructor){this._setFormPosition(1278,30);}_a=new Dataset("dsMessage",this);_a._setContents("<ColumnInfo><Column id=\"TOPIC_ID\" type=\"STRING\" size=\"256\"/><Column id=\"TOPIC_TYPE\" type=\"STRING\" size=\"256\"/><Column id=\"CODE\" type=\"STRING\" size=\"256\"/><Column id=\"MSG\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new XPush("XPush00",this);this.addChild(_a.name,_a);_a=new Static("staStatus","0","0",null,null,"0","0",null,null,null,null,this);_a.set_taborder("0");_a.set_cssclass("sta_BF_Bg");this.addChild(_a.name,_a);_a=new Button("Button00",null,"6","32","18","20",null,null,null,null,null,this);_a.set_taborder("1");_a.set_text("연장");_a.set_cssclass("btn_BF_Extend");this.addChild(_a.name,_a);_a=new Static("Static02",null,"1","143","29","60",null,null,null,null,null,this);_a.set_taborder("2");_a.set_cssclass("sta_BF_Section");_a.set_text("세션만료시간 | 26:30");this.addChild(_a.name,_a);_a=new Button("btnNotice",null,"6","52","18","228",null,null,null,null,null,this);_a.set_taborder("3");_a.set_text("알림 1");_a.set_cssclass("btn_BF_Extend");this.addChild(_a.name,_a);_a=new Button("btn00","905","6","70","17",null,null,null,null,null,null,this);_a.set_taborder("4");_a.set_text("btn00");this.addChild(_a.name,_a);_a=new Layout("default","",1278,30,this,function(_b){});this.addLayout(_a.name,_a);};this.loadPreloadList=function(){};this.registerScript("FrameBottom.xfdl",function(){this.form_onload=function(_a,_b){this.gfnFormOnLoad(this);if((nexacro._OS=="Android"||nexacro._OS=="iOS")&&(nexacro._Browser=="Runtime")){this.XPush00.set_layouturl("%USERAPP%XPushUrl/XPush_Message_Layout.xml");}else{this.XPush00.set_layouturl("XPushUrl::XPush_Message_Layout.xml");}this.XPush00.set_projectid("TOBE_EDU");trace("projectid : ["+this.XPush00.projectid+"]\nprotocol version : ["+this.XPush00.protocolversion+"]");this.XPush00.set_protocolversion(3);trace("projectid : ["+this.XPush00.projectid+"]\nprotocol version : ["+this.XPush00.protocolversion+"]");this.XPush00.set_iplist("tcp://172.10.14.132:50001, http://172.10.14.132:50000");this.XPush00.connect("User01","...");};this.fnInitNoticeShow=function(_b){var _c=_b;var _d=this.fnGetNoticeShow();var _e=false;this.fnSetNoticeShow(_c,_d,_e);};this.fnGetNoticeShow=function(){if(this.btnNotice.u_showYn=="Y"){return true;}return false;};this.fnSetNoticeShow=function(_b,_c,_d){if(_c){this.btnNotice.u_showYn="Y";this.btnNotice.set_border("1px solid red");_b.divNotice.form.staNotice.set_text(this.dsMessage.getColumn(this.dsMessage.getRowCount()-1,"MSG"));}else{this.btnNotice.u_showYn="N";this.btnNotice.set_border("");}if(_d){this.fnCreateAniObject(_b);if(_c){_b.aniShow.play();}else{_b.aniHide.play();}}else{if(_c){_b.divNotice.set_height(150);}else{_b.divNotice.set_height(0);}}};this.fnCreateAniObject=function(_b){if(!_b.aniShow){var _c=new nexacro.Animation("aniShow",_b);_b.addChild("aniShow",_c);_b.aniShow.addTarget("AniItem01",_b.divNotice,"height:150");_b.aniShow.setEventHandler("oncomplete",function(_a,_e){},_b);_b.aniShow.set_duration(500);var _d=new nexacro.Animation("aniHide",_b);_b.addChild("aniHide",_d);_b.aniHide.addTarget("AniItem01",_b.divNotice,"height:0");_b.aniHide.setEventHandler("oncomplete",function(_a,_e){},_b);_b.aniHide.set_duration(500);}};this.btn00_onclick=function(_a,_b){var _c=new ChildFrame();_c.init("chf_popup1",0,0,900,600,null,null,"EduBasic::XPush\\gvMes.xfdl");_c.set_openalign("center middle");_c.set_overlaycolor("RGBA(196,196,196,0.5)");_c.set_dragmovetype("all");var _d={paramOs:this.dsMessage};_c.showModal(this.getOwnerFrame(),_d,this,"fn_popupCallback");};this.fn_popupCallback=function(_b,_c){if(_c==undefined){return;}if(_b=="chf_popup1"){this.alert("Return Value: "+_c);}};this.XPush00_onsuccess=function(_a,_b){if(_b.message!=null){trace("e.message != null\n"+" - e.message.messagetype: "+_b.message.messagetype+"\n"+" - e.message.messagekey: "+_b.message.messagekey+"\n"+" - e.message.messageid: "+_b.message.messageid+"\n"+" - e.message.returnvalue: "+_b.message.returnvalue+"\n"+" - e.message.devicetoken: "+_b.message.devicetoken);}if(_b.action==0){trace("connect() ---------------success");var _c=this.XPush00.registerTopic("9999","ALL");if(_c){this.XPush00.subscribe("9999","ALL",this,this.dsMessage,"append","fn_push_callback");}}if(_b.action==1){trace("disconnect() success");}if(_b.action==2){trace("subscribe()-------------------- success");this.XPush00.requestMessage("9999","ALL");}if(_b.action==3){trace("unsubscribe() success");}if(_b.action==4){trace("requestMessage() success");}if(_b.action==5){trace("sendResponse() success");}if(_b.action==6){trace("reqisterDevice() success");}if(_b.action==7){trace("unreqisterDevice() success");}if(_b.action==8){trace("reqisterUser() success");this.XPush00.subscribe("9999","ALL",this,this.dsMessage,"append","fn_push_callback");}if(_b.action==9){trace("unreqisterUser() success");}if(_b.action==10){trace("requestMessageCount() success");if(_b.message.returnvalue!=undefined||_b.message.returnvalue!=null){var _d=_b.message.returnvalue;trace("length : "+_d.length);for(var _e=0;_e<_d.length;_e++ ){trace("index:"+_e+" : "+_d[_e].topictype+" : "+_d[_e].topicid+" : "+_d[_e].count);}}}};this.XPush00_onerror=function(_a,_b){if(_b.action==0){trace("connect() -----------------error");var _c=this.XPush00.requestMessage("9999","ALL");if(_c){this.XPush00.subscribe("9999","ALL",this,this.dsMessage,"append","fn_push_callback");}}if(_b.action==1){trace("disconnect() error");}if(_b.action==2){trace("subscribe() error");}if(_b.action==3){trace("unsubscribe() error");}if(_b.action==4){trace("requestMessage() error");}if(_b.action==5){trace("sendResponse() error");}if(_b.action==6){trace("reqisterDevice() error");}if(_b.action==7){trace("unreqisterDevice() error");}if(_b.action==8){trace("reqisterUser()-------------------- error");this.XPush00.subscribe("9999","ALL",this,this.dsMessage,"append","fn_push_callback");}if(_b.action==9){trace("unreqisterUser() error");}};this.XPush00_onkeepalive=function(_a,_b){trace("KEEP");};this.fn_push_callback=function(_b,_c,_d,_e,_f,_g){trace("XPush00_push_callback\n"+" - ActionType : "+_f+"\n"+" - Row : "+_b+"\n"+" - MessageId : "+_g+"\n"+"\n"+this.dsMessage.saveXML());if(this.btnNotice.u_showYn=="Y"){this.btnNotice_onclick();}this.btnNotice_onclick();if(_f=="PUSH"){}if(_f=="RELI"){this.XPush00.sendResponse(_g);}};this.btnNotice_onclick=function(_a,_b){var _c=null;var _d=this.gfnGetApplication();if(_d.gvVFrameSet1.separatesize=="30,*,0"){_c=_d.gvMainFrame.form;}else{_c=_d.gvWorkFrame.getActiveFrame().form;}var _e=true;if(this.btnNotice.u_showYn=="Y"){this.fnSetNoticeShow(_c,false,_e);}else{this.fnSetNoticeShow(_c,true,_e);}};});this.on_initEvent=function(){this.addEventHandler("onload",this.form_onload,this);this.btnNotice.addEventHandler("onclick",this.btnNotice_onclick,this);this.btn00.addEventHandler("onclick",this.btn00_onclick,this);this.XPush00.addEventHandler("onsuccess",this.XPush00_onsuccess,this);this.XPush00.addEventHandler("onerror",this.XPush00_onerror,this);this.XPush00.addEventHandler("onkeepalive",this.XPush00_onkeepalive,this);};this.loadIncludeScript("FrameBottom.xfdl");this.loadPreloadList();_a=null;};})();